<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSONファイルの作成</title>
<style>
#form {
  display: flex;
  flex-direction: column;
  align-items: center;
}

#form label {
  margin-right: 0px;
}

#form input,
#form button {
  margin-bottom: 0px;
}

</style>
</head>
<body>

<!-- フォームを作成 -->
<form id="form">
  <label for="name">Name:</label>
  <input type="text" id="name" name="name">
  <label for="email">Email:</label>
  <input type="email" id="email" name="email">
  <button type="submit">Submit</button>
  <button type="button" onclick="addMore()">Add More</button>
</form>

<!-- 表示領域を作成 -->
<div id="display"></div>

<script>
function addMore() {
  // フォームを複製する
  const clone = form.cloneNode(true);

  // 新しいフォームをページに追加する
  form.parentNode.insertBefore(clone, form);

  // 新しいフォームにもsubmitイベントリスナーを登録する
  clone.addEventListener('submit', saveData);
}

function saveData(event) {
  event.preventDefault();

  // フォームの入力内容を取得する
  const form = event.target;
  const name = form.elements.name.value;
  const email = form.elements.email.value;

  // 入力内容を JSON 形式で保存する
  const data = { name, email };
  const json = JSON.stringify(data);
  // JSONデータを.jsonファイルとして保存します
  const blob = new Blob([json], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.download = 'data.json';
  a.href = url;
  a.click();
}

const form = document.getElementById('form');
form.addEventListener('submit', saveData);

</script>

</body>
</html>
